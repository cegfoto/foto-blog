<!DOCTYPE html>
<html>
<head>
<title>Game</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> 
</head>
<body>

    <div class="w3-top">
        <div class="w3-bar w3-white w3-wide w3-padding w3-card">
          <a href="#home" class="w3-bar-item w3-button"><b>Memory</b></a>
        </div>
    </div>

    <div class="w3-content w3-padding" style="max-width:1564px"></div>

    <div class="w3-container w3-padding-32" id="projects">
        <h3 class="w3-border-bottom w3-border-light-grey w3-padding-16">Images</h3>
    </div>

    <div class="w3-row-padding">
      <div class="w3-col l3 m6 w3-margin-bottom">
          Plays: <p id="contador-jogadas"></p>
      </div>
      <div class="w3-col l3 m6 w3-margin-bottom">
          Hits: <p id="contador-acertos"></p>
      </div>        
    </div>

    <div class="w3-row-padding">
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">1</div>
            <img class="real-image" id="1" src="1-1.JPG" style="width:99%; display: none;">
            <img onclick="showImage(1)" id="1-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">2</div>
            <img class="real-image"  id="2" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(2)" id="2-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">3</div>
            <img class="real-image" id="3" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(3)" id="3-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">4</div>
            <img class="real-image" id="4" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(4)" id="4-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
    </div>

    <div class="w3-row-padding">
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">5</div>
            <img class="real-image" id="5" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(5)" id="5-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">6</div>
            <img class="real-image" id="6" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(6)" id="6-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">7</div>
            <img class="real-image" id="7" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(7)" id="7-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>
        <div class="w3-col l3 m6 w3-margin-bottom">
          <div class="w3-display-container">
            <div class="w3-display-topleft w3-black w3-padding">8</div>
            <img class="real-image" id="8" src="1-1.JPG"  style="width:99%; display: none;">
            <img onclick="showImage(8)" id="8-cover" class="cover-image" src="0-0.JPG" style="width:99%">
          </div>
        </div>

        <div class="w3-row-padding">
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">9</div>
                <img class="real-image" id="9" src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(9)" id="9-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
            </div>
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">10</div>
                <img class="real-image" id="10" src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(10)" id="10-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
            </div>
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">11</div>
                <img class="real-image" id="11" src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(11)" id="11-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
            </div>
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">12</div>
                <img class="real-image" id="12" src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(12)" id="12-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
        </div>

        <div class="w3-row-padding">
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">13</div>
                <img class="real-image" id="13" src="1-1.JPG" style="width:99%; display: none;">
                <img onclick="showImage(13)" id="13-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
            </div>
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">14</div>
                <img class="real-image" id="14" src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(14)" id="14-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
            </div>
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">15</div>
                <img class="real-image" id="15"  src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(15)" id="15-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
            </div>
            <div class="w3-col l3 m6 w3-margin-bottom">
              <div class="w3-display-container">
                <div class="w3-display-topleft w3-black w3-padding">16</div>
                <img class="real-image" id="16" src="1-1.JPG"  style="width:99%; display: none;">
                <img onclick="showImage(16)" id="16-cover" class="cover-image" src="0-0.JPG" style="width:99%">
              </div>
        </div>

    </div>
    <footer class="w3-center w3-black w3-padding-16">
    </footer>

    <script>
        let indicesJausados = [];
        let count = 0;
        let jogada = [];
        let acertos = 0;
        let jogadas = 0;

        let contador1 = 0;
        while (indicesJausados.length < 8) {
          let indiceImagemUm = Math.floor(Math.random() * (4 - 1 + 1)) + 1;
          let indiceImagemDois = Math.floor(Math.random() * (4 - 1 + 1)) + 1;
          let imagem = indiceImagemUm + '-' + indiceImagemDois;

          if (indicesJausados.indexOf(imagem) == -1) {
            indicesJausados.push(imagem);
          }
          if (contador1 >= 100) {
            break;
          }
          contador1++;
        }

        let posicoesUsadas = [];
        let contador2 = 0;
        while (posicoesUsadas.length < 16) {
          let posicao = Math.floor(Math.random() * (16 - 1 + 1)) + 1;
          if (posicoesUsadas.indexOf(posicao) == -1) {
            posicoesUsadas.push(posicao);
          }

          if (contador2 >= 100) {
            break;
          }
          contador2++;
        }

        if (
          posicoesUsadas.length < 16
          || indicesJausados.length < 8
        ) {
          alert('Unable to mount game, page will be reloaded.');
          location.reload()
        }

        let memoria = [];
        for (count = 0; count < 8; count++) {
          memoria.push(
            [
              indicesJausados[count],
              posicoesUsadas[count],
              posicoesUsadas[count+8]
            ]
          );
        }
      
        for (count = 0; count < 8; count++) {
          document.getElementById(memoria[count][1]).src = memoria[count][0] + '.JPG';
          document.getElementById(memoria[count][2]).src = memoria[count][0] + '.JPG';
        }

        let coverImages = document.getElementsByClassName("cover-image");
        let realImages =  document.getElementsByClassName("real-image");
        for (let i = 0; i < coverImages.length; i++) {
          coverImages[i].style.display = 'none';
          realImages[i].style.display = '';
        }
        setTimeout(amostragemInicial, 6000);

        function showImage(image) {
          if (jogada.length >= 2) {
            return;
          }

          document.getElementById(image + "-cover").style.display = 'none';
          document.getElementById(image).style.display = '';

          jogada.push([ 
            document.getElementById(image).src,
            image
          ]);

          if (jogada.length >= 2) {
            if (jogada[0][0] == jogada[1][0]) {
              acertos++;
              jogada = [];
            } else {
              setTimeout(esconderImagem, 1000);
            }
            jogadas++;
          }

          document.getElementById('contador-jogadas').textContent = jogadas;
          document.getElementById('contador-acertos').textContent = acertos;

          if (acertos >= 8) {
            alert('Game Over!! '+jogadas+' plays');
          }
        }

        function esconderImagem() {
          document.getElementById(jogada[0][1] + "-cover").style.display = '';
          document.getElementById(jogada[0][1]).style.display = 'none';
          document.getElementById(jogada[1][1] + "-cover").style.display = '';
          document.getElementById(jogada[1][1]).style.display = 'none';
          jogada = [];
        }

        function amostragemInicial() {
          let coverImages = document.getElementsByClassName("cover-image");
          let realImages =  document.getElementsByClassName("real-image");
          for (let i = 0; i < coverImages.length; i++) {
            coverImages[i].style.display = '';
            realImages[i].style.display = 'none';
          }
        }
    </script>

</body>
</html>